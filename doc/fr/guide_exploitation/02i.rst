==============================
Gérer les dépendances logiques
==============================

Nous avons vu dans le chapitre :ref:`Les dépendances <dependancy>` comment configurer des dépendances entre les hôtes et les services.
Ce sous-chapitre permet d'illustrer l'utilisation de ces dépendances au travers de quelques cas concrets.

***********************
Dépendance d'un service
***********************

Un service est vérifié en utilisant un scénario Sélénium.
Ce scénario se connecte à une interface web avec un identifiant et un mot de passe. Ces informations de connexions sont stockée dans une base de données MySQL.

Par conséquent, si jamais le serveur de base de données ne répond plus alors le scénario Sélénium ne peut pas réussir.
Il parait évident qu'il est nécessaire de créer un lien de dépendance entre le service qui utilise le scénario Sélénium et le service qui est chargé de vérifier le statut du serveur MySQL.

De plus, étant donné que le scénario Sélénium ne peut pas s'exécuter correctement aucune donnée de performances ne peut être stockées en base de données. Nous allons donc arrêter non seulement la notification pour le service utilisant le scénario Sélénium mais aussi la vérification.

Afin de créer créer cette dépendance :

#. Rendez-vous dans **Configuration** ==> **Notifications**
#. Dans le menu de gauche en dessous de **Dépendances** cliquez sur **Services**
#. Cliquez sur **Ajouter**
#. Entrez le nom et la decription de la dépendance
#. Pour les champs **Critères d'échec d'exécution** et **Critères d'échec de notification** cochez Alerte, Critique, Inconnu et En attente
#. Dans la liste **Service** entrez le service qui est chargé de vérifier le statut du serveur MySQL
#. Dans la liste **Services dépendants** entrez le service qui utilise le scénario Sélénium
#. Sauvegardez

A partir de ce moment, si le service chargé de vérifier le statut du serveur MySQL a un statut Alerte, Critique, Inconnu ou En attente alors le service chargé d'exécuter le scénario Sélénium ne sera plus exécuté jusqu'à ce que le service maitre redeviennent OK.

********************
Dépendance d'un hôte
********************

Donner l'exemple d'un check cluster


*********************************
Dépendance d'un groupe de service
*********************************

Donner l'exemple d'un ensemble de services Oracle sur lequel se base l'application ERP