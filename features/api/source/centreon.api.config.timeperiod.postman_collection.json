{
	"info": {
		"_postman_id": "fdec21e0-c75f-4787-80c1-952b48972685",
		"name": "Configure timeperiods",
		"description": "Configure timeperiods",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Add timeperiod",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\": \"add\",\n  \"object\": \"tp\",\n  \"values\": \"{{timeperiod_name}};{{timeperiod_alias}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add test timeperiod",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\": \"add\",\n  \"object\": \"tp\",\n  \"values\": \"test_name;test_alias\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam name",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"test_name;name;{{timeperiod_name}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam alias",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};alias;{{timeperiod_alias}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam sunday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};sunday;{{timeperiod_sunday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam monday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};monday;{{timeperiod_monday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam tuesday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};tuesday;{{timeperiod_tuesday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam wednesday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};wednesday;{{timeperiod_wednesday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam thursday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};thursday;{{timeperiod_thursday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam friday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};friday;{{timeperiod_friday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam saturday",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};saturday;{{timeperiod_saturday}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam include",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};include;{{timeperiod_include}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Setparam exclude",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"setparam\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}};exclude;{{timeperiod_exclude}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Show timeperiods",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"var tpData = jsonData.result;",
							"",
							"try {",
							"    tests[\"Body contains list of time periods\"] = tpData;",
							"    var i = 0;",
							"    while (i < tpData.length) {",
							"        if (postman.getEnvironmentVariable(\"timeperiod_name\") == tpData[i].name) {",
							"            tests[\"Body contains added name\"] = postman.getEnvironmentVariable(\"timeperiod_name\") == tpData[i].name;",
							"            tests[\"Body contains added alias\"] = postman.getEnvironmentVariable(\"timeperiod_alias\") == tpData[i].alias;",
							"            tests[\"Body contains added sunday\"] = postman.getEnvironmentVariable(\"timeperiod_sunday\") == tpData[i].sunday;",
							"            tests[\"Body contains added monday\"] = postman.getEnvironmentVariable(\"timeperiod_monday\") == tpData[i].monday;",
							"            tests[\"Body contains added tuesday\"] = postman.getEnvironmentVariable(\"timeperiod_tuesday\") == tpData[i].tuesday;",
							"            tests[\"Body contains added wednesday\"] = postman.getEnvironmentVariable(\"timeperiod_wednesday\") == tpData[i].wednesday;",
							"            tests[\"Body contains added thursday\"] = postman.getEnvironmentVariable(\"timeperiod_thursday\") == tpData[i].thursday;",
							"            tests[\"Body contains added friday\"] = postman.getEnvironmentVariable(\"timeperiod_friday\") == tpData[i].friday;",
							"            tests[\"Body contains added saturday\"] = postman.getEnvironmentVariable(\"timeperiod_saturday\") == tpData[i].saturday;",
							"            break;",
							"        }",
							"        i++;",
							"    }",
							"    if (i == tpData.length)",
							"        tests[\"timeperiod_name was found\"] = false;",
							"} catch (e) {}",
							"",
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\": \"show\",\n  \"object\": \"tp\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Set exception",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\": \"setexception\",\n  \"object\": \"tp\",\n  \"values\": \"{{timeperiod_name}};{{exception_day}};{{exception_timerange}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get exceptions",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"var exceptionData = jsonData.result;",
							"",
							"try {",
							"    tests[\"Body contains list of exceptions\"] = exceptionData;",
							"    var i = 0;",
							"    while (i < exceptionData.length) {",
							"        if (postman.getEnvironmentVariable(\"exception_day\") == exceptionData[i].days) {",
							"            tests[\"Body contains added exception day\"] = postman.getEnvironmentVariable(\"exception_day\") == exceptionData[i].days;",
							"            tests[\"Body contains added exception timerange\"] = postman.getEnvironmentVariable(\"exception_timerange\") == exceptionData[i].timerange;",
							"            break;",
							"        }",
							"        i++;",
							"    }",
							"    if (i == tpData.length)",
							"        tests[\"timeperiod_name was found\"] = false;",
							"} catch (e) {}",
							"",
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\":\"getexception\",\n  \"object\":\"tp\",\n  \"values\": \"{{timeperiod_name}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Del exception",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 200\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "centreon-auth-token",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"action\": \"delexception\",\n  \"object\": \"tp\",\n  \"values\": \"{{timeperiod_name}};{{exception_day}}\"\n}"
				},
				"url": {
					"raw": "http://{{url}}/centreon/api/index.php?action=action&object=centreon_clapi",
					"protocol": "http",
					"host": [
						"{{url}}"
					],
					"path": [
						"centreon",
						"api",
						"index.php"
					],
					"query": [
						{
							"key": "action",
							"value": "action"
						},
						{
							"key": "object",
							"value": "centreon_clapi"
						}
					]
				}
			},
			"response": []
		}
	]
}
