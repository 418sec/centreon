######################################################
# How to upgrade your 1.3.3 in 1.4.1-RC1 ?
######################################################


- Download centreon-1.4.1-RC1.tar.gz

- unzip centreon-1.4.1.-RC1.tar.gz :

$> tar -xzf centreon-1.4.1.-RC1.tar.gz

- launch upgrade script :

$> cd /root/centreon-1.4.1.-RC1
$>./install.sh

- Answer to all questions to upgrade your release.

- Log to mysql, create 'ods' database and create tables :  

consider : 
	ods = table for oreon data storage
	root = login mysql for root
	mysql-password = mysql password
	oreon = oreon user mysql

$>mysql -u root -p
mysql> CREATE DATABASE `ods` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;
mysql> GRANT ALL PRIVILEGES ON `ods` . * TO 'oreon'@'localhost';
mysql> exit 
$> mysql -u root -p -B ods < ./www/install/createTablesODS.sql

After all this request, add in oreon.conf.php file in oreon/www/ directory of centreon this line :

$conf_oreon['ods'] = "ods";

juste after 

$conf_oreon['db'] = "oreon";

Now you can go on oreon interface to finish update by web browser (SQL update).

http://youroreonip/oreon/

First, apply patch 'UpdateDB-1.4.sql', second apply patch 'UpdateDB-1.4.1-RC1.sql'.

Check if everything is fine :
General Options -> Oreon
General Options -> Centreon Data Storage
General Options -> SNMP
Configuration -> Nagios -> Nagios.cfg
Configuration -> Nagios -> Resource.cfg

!!CAUTION!!
In this new release, we don't manage anymore graphs plugins storage, so your check_graph_* plugins will not work anymore (Problem with -S arg will occur)
Please modify the commands using this plugins by using now check_centreon_* plugins.
For example : 
command "check_graph_ping" => "$USER1$/check_graph_ping.pl ... -g -S $ARGn$ " 
can became "check_graph_ping" => "$USER1$/check_centreon_ping ..." 
or "check_centreon_ping" => "$USER1$/check_centreon_ping ..."

Then generate/restart Nagios and start ods
$> /etc/init.d/ods start
